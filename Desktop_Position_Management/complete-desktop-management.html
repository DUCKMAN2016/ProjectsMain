<!DOCTYPE html>
<html>
<head>
    <title>Complete Desktop Management System</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; }
        .btn { padding: 10px 15px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; color: white; font-size: 14px; }
        .btn:hover { opacity: 0.8; }
        #status { margin: 20px 0; padding: 15px; background: #e8f4fd; border-radius: 8px; border-left: 4px solid #3498db; }
        .section { margin: 30px 0; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .section h3 { margin-top: 0; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        .workspace { display: flex; gap: 20px; margin: 20px 0; }
        .monitor-section { flex: 1; }
        .monitor-container { background: #ecf0f1; border: 2px solid #34495e; border-radius: 8px; padding: 10px; }
        .monitor-label { background: #34495e; color: white; padding: 5px; text-align: center; margin: -10px -10px 10px -10px; border-radius: 6px 6px 0 0; }
        .taskbar { background: #34495e; height: 30px; margin: -10px -10px 10px -10px; border-radius: 6px 6px 0 0; }
        .icon-grid { display: grid; grid-template-columns: repeat(12, 40px); grid-template-rows: repeat(6, 40px); gap: 2px; padding: 5px; }
        .grid-cell { background: #bdc3c7; border: 1px solid #95a5a6; border-radius: 3px; cursor: pointer; font-size: 10px; display: flex; align-items: center; justify-content: center; }
        .grid-cell:hover { background: #3498db; }
        .grid-cell.occupied { background: #27ae60; color: white; }
        .icon-list-section { flex: 0 0 300px; }
        .icon-list { max-height: 400px; overflow-y: auto; }
        .icon-item { padding: 8px; margin: 2px 0; background: #ecf0f1; border-radius: 4px; cursor: pointer; }
        .icon-item:hover { background: #3498db; color: white; }
        .controls { display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0; }
        .layout-info { background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñ•Ô∏è Complete Desktop Management System</h1>
        
        <div class="section">
            <h3>üìã Icon Grid Planner</h3>
            <div class="workspace">
                <div class="monitor-section">
                    <div class="monitor-container">
                        <div class="monitor-label">Primary Monitor: 1366x768</div>
                        <div class="taskbar">Taskbar (Top)</div>
                        <div class="icon-grid" id="iconGrid">
                            <!-- Grid will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="icon-list-section">
                    <h4>Available Icons</h4>
                    <div class="icon-list" id="iconList">
                        <!-- Icon list will be generated by JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn" style="background: #95a5a6;" onclick="resetGrid()">Reset Grid</button>
                <button class="btn" style="background: #e74c3c;" onclick="clearGrid()">Clear Grid</button>
                <button class="btn" style="background: #27ae60;" onclick="saveLayout()">Save Layout</button>
                <button class="btn" style="background: #3498db;" onclick="exportLayout()">Export Layout</button>
                <label class="btn" style="background: #9b59b6; margin: 0;">
                    üìÇ Import Layout
                    <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="loadLayoutFromFile(event)">
                </label>
            </div>
            
            <div class="layout-info" id="layoutInfo">
                <strong>Current Layout:</strong><br>
                Click grid cells to place icons, or drag from the list.
            </div>
        </div>
        
        <div class="section">
            <h3>üñ•Ô∏è Desktop Icon Controls</h3>
            <div class="controls">
                <button class="btn" style="background: #27ae60;" onclick="showCommand('save')">
                    üíæ Save Current Layout
                </button>
                <button class="btn" style="background: #3498db;" onclick="showCommand('restore')">
                    üîÑ Restore to Clean Layout
                </button>
                <button class="btn" style="background: #9b59b6;" onclick="showCommand('document')">
                    üìÑ Document Positions
                </button>
                <button class="btn" style="background: #e67e22;" onclick="showCommand('mess-up-desktop')">
                    üå™Ô∏è Mess Up Desktop
                </button>
                <button class="btn" style="background: #e74c3c;" onclick="showCommand('emergency-reset')">
                    üö® Emergency Reset
                </button>
            </div>
        </div>
        
        <div class="section">
            <h3>üîß Plasma Management</h3>
            <div class="controls">
                <button class="btn" style="background: #f39c12;" onclick="showCommand('restart-plasma')">
                    üîÑ Restart Plasma
                </button>
                <button class="btn" style="background: #c0392b;" onclick="showCommand('kill-plasma')">
                    üíÄ Kill Plasma
                </button>
                <button class="btn" style="background: #9b59b6;" onclick="showCommand('restore-wallpapers')">
                    üñºÔ∏è Restore Wallpapers
                </button>
            </div>
        </div>
        
        <div id="status">Click a button to see the command...</div>
    </div>
    
    <script>
        // Icon grid functionality
        const availableIcons = [
            'btop', 'Cool Retro', 'Defender', 'DOS Games', 'Full Shutdown', 'Galaxy Wars',
            'HandBrake', 'Kaypro', 'Lock Screen', 'Logout', 'MAME Set', 'Ms. Pac-Man',
            'NAS Controls', 'Newshosting', 'Octopi', 'Power Off', 'QBittorrent', 'Rainbow MAME',
            'Reboot', 'Refresh Desktop', 'Steam', 'Toggle Apps', 'Toggle Desktop', 'TRS-80',
            'Unimatrix', 'Wallpapers', 'WinDirStat', 'Xscreensaver', 'Yakuake'
        ];
        
        let gridLayout = {};
        
        function initializeGrid() {
            const iconGrid = document.getElementById('iconGrid');
            const iconList = document.getElementById('iconList');
            
            // Create grid cells
            for (let row = 1; row <= 6; row++) {
                for (let col = 1; col <= 12; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'grid-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    cell.onclick = () => selectCell(row, col);
                    iconGrid.appendChild(cell);
                }
            }
            
            // Create icon list
            availableIcons.forEach(icon => {
                const iconItem = document.createElement('div');
                iconItem.className = 'icon-item';
                iconItem.textContent = icon;
                iconItem.onclick = () => selectIcon(icon);
                iconList.appendChild(iconItem);
            });
            
            updateGrid();
        }
        
        let selectedIcon = null;
        
        function selectIcon(icon) {
            selectedIcon = icon;
            document.querySelectorAll('.icon-item').forEach(item => {
                item.style.background = item.textContent === icon ? '#3498db' : '#ecf0f1';
                item.style.color = item.textContent === icon ? 'white' : 'black';
            });
        }
        
        function selectCell(row, col) {
            const key = `${row}-${col}`;
            if (selectedIcon) {
                gridLayout[key] = selectedIcon;
                selectedIcon = null;
                document.querySelectorAll('.icon-item').forEach(item => {
                    item.style.background = '#ecf0f1';
                    item.style.color = 'black';
                });
            } else {
                delete gridLayout[key];
            }
            updateGrid();
        }
        
        function updateGrid() {
            document.querySelectorAll('.grid-cell').forEach(cell => {
                const key = `${cell.dataset.row}-${cell.dataset.col}`;
                const icon = gridLayout[key];
                cell.textContent = icon ? icon.substring(0, 3) : '';
                cell.className = icon ? 'grid-cell occupied' : 'grid-cell';
            });
        }
        
        function resetGrid() {
            gridLayout = {};
            selectedIcon = null;
            updateGrid();
            document.querySelectorAll('.icon-item').forEach(item => {
                item.style.background = '#ecf0f1';
                item.style.color = 'black';
            });
        }
        
        function clearGrid() {
            gridLayout = {};
            updateGrid();
        }
        
        function saveLayout() {
            const data = JSON.stringify(gridLayout, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'icon-layout.json';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function exportLayout() {
            let text = '# Icon Layout\n\n';
            for (let row = 1; row <= 6; row++) {
                text += `## Row ${row}\n`;
                for (let col = 1; col <= 12; col++) {
                    const key = `${row}-${col}`;
                    if (gridLayout[key]) {
                        text += `Col ${col}: ${gridLayout[key]}\n`;
                    }
                }
                text += '\n';
            }
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'icon-layout.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function loadLayoutFromFile(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    // Handle both direct layout and nested layout object
                    if (data.layout) {
                        gridLayout = data.layout;
                    } else {
                        gridLayout = data;
                    }
                    updateGrid();
                    document.getElementById('layoutInfo').innerHTML = `
                        <strong>Layout Loaded:</strong><br>
                        üìÅ File: ${file.name}<br>
                        üìä Icons placed: ${Object.keys(gridLayout).length}<br>
                        ‚úÖ Layout imported successfully!
                    `;
                } catch (error) {
                    document.getElementById('layoutInfo').innerHTML = `
                        <strong>Error:</strong><br>
                        ‚ùå Failed to load layout file<br>
                        üí° Make sure it's a valid JSON layout file<br>
                        üìù Error: ${error.message}
                    `;
                }
            };
            reader.readAsText(file);
        }
        
        // Command display functionality
        function showCommand(action) {
            const statusDiv = document.getElementById('status');
            
            const commands = {
                'save': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./simple-restore-original-layout.sh',
                'restore': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./simple-restore-original-layout.sh',
                'document': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ../Post-Install-CachyOS/Scripts/document_desktop_positions_with_coords.sh',
                'emergency-reset': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./ultra-safe-desktop-icons.sh emergency-reset',
                'mess-up-desktop': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./mess-up-desktop.sh',
                'restart-plasma': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./kill-plasma-reliable.sh',
                'kill-plasma': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./kill-plasma.sh',
                'restore-wallpapers': 'cd /run/media/duck/extra/User/Downloads/ProjectsMain/Desktop_Position_Management && ./kde-wallpaper-fix.sh'
            };
            
            const descriptions = {
                'save': 'Save current desktop icon layout',
                'restore': 'Restore desktop icons from backup',
                'document': 'Document current desktop positions',
                'emergency-reset': 'Emergency reset from backup',
                'mess-up-desktop': 'Scramble desktop icons for testing',
                'restart-plasma': 'Restart plasma shell (reliable method)',
                'kill-plasma': 'Force kill and restart plasma',
                'restore-wallpapers': 'Restore wallpaper configuration'
            };
            
            const command = commands[action];
            const description = descriptions[action];
            
            statusDiv.innerHTML = `
                ‚úÖ <strong>Command Ready:</strong><br>
                üìã <strong>Action:</strong> ${description}<br>
                üíª <strong>Run this command in terminal:</strong><br>
                <code style="background: #f0f0f0; padding: 5px; border-radius: 3px; display: inline-block; margin: 5px 0;">${command}</code><br>
                üìÅ <strong>Works from any directory</strong><br>
                üîÑ <strong>Copy and run the complete command above!</strong>
            `;
        }
        
        // Initialize on load
        document.addEventListener('DOMContentLoaded', initializeGrid);
    </script>
</body>
</html>
